// stdlib for csi
// copyright (c) 2010 darkf
// license: zlib

SEEK_SET = 0
SEEK_CUR = 1
SEEK_END = 2

rewind = [
  result (fseek $arg1 1 $SEEK_SET)
]

file_get_contents = [
  filename = $arg1
  if (! (fopen fd $filename "r")) [
    error (concat "error opening file:" $filename)
  ]

  fseek fd 0 $SEEK_END
  size = (ftell fd)
  rewind fd

  fread fd buf $size
  fclose fd
  result $buf
]